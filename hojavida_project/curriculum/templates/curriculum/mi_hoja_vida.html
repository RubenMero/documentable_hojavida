{% extends 'curriculum/base.html' %}

{% block extra_css %}
<style>
    :root {
        --negro-fuerte: #000000;
        --gris-profundo: #1a1a1a;
        --gris-suave: #f1f5f9;
        --detalle: #334155;
    }
    /* DISEÑO PROFESIONAL Y ALTO CONTRASTE */
    .cv-container {
        display: flex;
        gap: 40px;
        align-items: center;
        padding-bottom: 30px;
        margin-bottom: 40px;
        border-bottom: 1px solid #e2e8f0;
    }
    
    .cv-photo {
        width: 160px;
        height: 160px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid #000;
        padding: 5px;
        background: #fff;
    }
    
    .hero-text h1 {
        font-size: 3.2em;
        color: var(--negro-fuerte);
        margin: 0;
        font-weight: 850;
        letter-spacing: -1px;
        line-height: 1.5;
    }

    .hero-text p {
        margin-top: 10px; /* Espacio extra hacia arriba */
        color: #444; 
        font-size: 1.3em; 
        font-weight: 500;
        letter-spacing: 0.5px;
    }

    /* DATOS PERSONALES EN VERTICAL */
    .info-grid {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-top: 20px;
    }

    .info-item {
        display: flex;
        border-bottom: 1px solid #f0f0f0;
        padding-bottom: 8px;
    }

    .info-item strong {
        width: 220px; /* Alineación perfecta de etiquetas */
        color: #000 !important;
        font-weight: 700;
        text-transform: uppercase;
        font-size: 0.85em;
    }

    .info-item span, .info-item a {
        color: #1a1a1a; /* Texto oscuro, no gris */
        font-weight: 400;
    }

    /* SECCIONES */
    .seccion {
        margin-bottom:60px;
    }
    
    .seccion-titulo {
        font-size: 1.4em;
        color: var(--negro-fuerte);
        border-bottom: 2px solid #000;
        display: inline-block; 
        padding-bottom: 5px;
        margin-bottom: 30px;
        text-transform: uppercase;
        letter-spacing: 2px;
        font-weight: 800;
    }

    .item-card {
        border-left: 2px solid #5802ed;
        padding-left: 20px;
        margin-bottom: 25px;
    }

    .item-card h4 {
        color: #000;
        font-weight: 700;
        margin-bottom: 5px;
    }

    .badge {
        background: #e9ecef;
        color: #000;
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.85em;
        font-weight: 600;
    }

    .certificado-link {
        color: #5802ed;
        text-decoration: underline;
        font-weight: 600;
        display: inline-block;
        margin-top: 10px;
    }
</style>
{% endblock %}

{% block content %}
{% if perfil %}
    <div class="cv-container">
        {% if perfil.foto_perfil %}
            <img src="{{ perfil.foto_perfil.url }}" alt="Foto" class="cv-photo">
        {% else %}
            <div class="cv-photo" style="background: #eee; display: flex; align-items: center; justify-content: center; color: #666;">
                <span>Sin Foto</span>
            </div>
        {% endif %}

        <div class="hero-text">
            <h1>{{ perfil.nombres }} {{ perfil.apellidos }}</h1>
            <p style="color: #000; font-size: 1.3em; font-weight: 500;">{{ perfil.descripcionperfil|default:"Profesional" }}</p>
        </div>
    </div>
    
    <div class="seccion">
        <h2 class="seccion-titulo">Datos Personales</h2>
        <div class="info-grid">
            
            {% if perfil.numerocedula %}
            <div class="info-item">
                <strong>Cédula:</strong>
                <span>{{ perfil.numerocedula }}</span>
            </div>
            {% endif %}

            {% if perfil.nacionalidad %}
            <div class="info-item">
                <strong>Nacionalidad:</strong>
                <span>{{ perfil.nacionalidad }}</span>
            </div>
            {% endif %}

            {% if perfil.fechanacimiento %}
            <div class="info-item">
                <strong>Fecha de Nacimiento:</strong>
                <span>{{ perfil.fechanacimiento|date:"d/m/Y" }}</span>
            </div>
            {% endif %}

            {% if perfil.lugarnacimiento %}
            <div class="info-item">
                <strong>Lugar de Nacimiento:</strong>
                <span>{{ perfil.lugarnacimiento }}</span>
            </div>
            {% endif %}

            {% if perfil.estadocivil %}
            <div class="info-item">
                <strong>Estado Civil:</strong>
                <span>{{ perfil.estadocivil }}</span>
            </div>
            {% endif %}

            {% if perfil.sexo %}
            <div class="info-item">
                <strong>Sexo:</strong>
                <span>{% if perfil.sexo == 'H' %}Hombre{% else %}Mujer{% endif %}</span>
            </div>
            {% endif %}

            {% if perfil.telefonoconvencional %}
            <div class="info-item">
                <strong>Teléfono Fijo:</strong>
                <span>{{ perfil.telefonoconvencional }}</span>
            </div>
            {% endif %}

            {% if perfil.telefonofijo %}
            <div class="info-item">
                <strong>Teléfono Celular:</strong>
                <span>{{ perfil.telefonofijo }}</span>
            </div>
            {% endif %}

            {% if perfil.direcciondomiciliaria %}
            <div class="info-item">
                <strong>Dirección:</strong>
                <span>{{ perfil.direcciondomiciliaria }}</span>
            </div>
            {% endif %}

            {% if perfil.sitioweb %}
            <div class="info-item">
                <strong>Sitio Web:</strong>
                <span><a href="{{ perfil.sitioweb }}" target="_blank" style="color: #000; text-decoration: none; border-bottom: 1px solid #5802ed;">{{ perfil.sitioweb }}</a></span>
            </div>
            {% endif %}

        </div>
    </div>
    
    {% if experiencias %}
    <div class="seccion">
        <h2 class="seccion-titulo">Experiencia Laboral</h2>
        {% for exp in experiencias %}
        <div class="item-card">
            <h4>{{ exp.cargodesempenado }}</h4>
            <p><strong>{{ exp.nombrempresa }}</strong> | {{ exp.lugarempresa }}</p>
            <p>
                <span class="badge">{{ exp.fechainiciogestion|date:"m/Y" }} - {% if exp.fechafingestion %}{{ exp.fechafingestion|date:"m/Y" }}{% else %}Actualidad{% endif %}</span>
            </p>
            <p>{{ exp.descripcionfunciones }}</p>
            {% if exp.rutacertificado %}
            <a href="{{ exp.rutacertificado.url }}" target="_blank" class="certificado-link">Ver Certificado</a>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% endif %}
    
    {% if reconocimientos %}
    <div class="seccion">
        <h2 class="seccion-titulo">Reconocimientos</h2>
        {% for rec in reconocimientos %}
        <div class="item-card">
            <h4>{{ rec.descripcionreconocimiento }}</h4>
            <p><span class="badge">{{ rec.tiporeconocimiento }}</span> | {{ rec.fechareconocimiento|date:"d/m/Y" }}</p>
            <p><strong>Otorgado por:</strong> {{ rec.entidadpatrocinadora }}</p>
            {% if rec.rutacertificado %}
            <a href="{{ rec.rutacertificado.url }}" target="_blank" class="certificado-link">Ver Certificado</a>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% endif %}
    
    {% if cursos %}
    <div class="seccion">
        <h2 class="seccion-titulo">Cursos Realizados</h2>
        {% for curso in cursos %}
        <div class="item-card">
            <h4>{{ curso.nombrecurso }}</h4>
            <p>
                <span class="badge">{{ curso.totalhoras }} horas</span> | 
                {{ curso.fechainicio|date:"m/Y" }} - {{ curso.fechafin|date:"m/Y" }}
            </p>
            <p><strong>Impartido por:</strong> {{ curso.entidadpatrocinadora }}</p>
            {% if curso.rutacertificado %}
            <a href="{{ curso.rutacertificado.url }}" target="_blank" class="certificado-link">Ver Certificado</a>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if productos_academicos %}
    <div class="seccion">
        <h2 class="seccion-titulo">Productos Académicos</h2>
        {% for prod in productos_academicos %}
        <div class="item-card">
            <h4>{{ prod.nombrerecurso }}</h4>
            <p><span class="badge">{{ prod.clasificador }}</span></p>
            <p>{{ prod.descripcion }}</p>
            {% if prod.archivo %}
            <a href="{{ prod.archivo.url }}" target="_blank" class="certificado-link">Ver Archivo</a>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% endif %}
    
    {% if ventas %}
    <div class="seccion">
        <h2 class="seccion-titulo">Venta Garage</h2>
        {% for venta in ventas %}
        <div class="item-card">
            <h4>{{ venta.nombreproducto }}</h4>
            <p><span class="badge">Estado: {{ venta.estadoproducto }}</span> | <strong>${{ venta.valordelbien }}</strong></p>
            <p>{{ venta.descripcion }}</p>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <div style="text-align: center; margin: 50px 0;">
        <a href="{% url 'curriculum:descargar_pdf' %}" 
           style="padding: 15px 40px; background: #5802ed; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; display: inline-block;">
            Descargar Hoja de vida en PDF
        </a>
    </div>

{% else %}
    <div style="text-align: center; padding: 100px 20px;">
        <h2>No hay hoja de vida disponible</h2>
        <p>Aún no se ha creado ningún perfil activo.</p>
    </div>
{% endif %}
{% endblock %}